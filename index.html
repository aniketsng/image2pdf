<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>All-in-One Document Workbench</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #0f172a;
      --card: #020617;
      --text: #f1f5f9;
      --accent: #38bdf8;
      --accent2: #6366f1;
    }

    body.light {
      --bg: #f8fafc;
      --card: #ffffff;
      --text: #020617;
      --accent: #0ea5e9;
      --accent2: #2563eb;
    }

    body {
      font-family: Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      display: block;
      min-height: 100vh;
      margin: 0;
      padding-top: 0;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .card {
      backdrop-filter: blur(6px);
      background: var(--card);
      padding: 2rem;
      border-radius: 1.5rem;
      width: 100%;
      max-width: 440px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
      text-align: center;
      animation: floatIn 0.5s ease;
    }

    h1 { margin-bottom: 1rem; font-size: 1.5rem; }

    input[type="file"], input[type="text"] {
      width: 100%;
      margin: 0.75rem 0;
      padding: 0.6rem;
      border-radius: 0.75rem;
      background: transparent;
      color: var(--text);
      border: 1px solid #334155;
    }

    button.action {
      width: 100%;
      padding: 0.9rem;
      border: none;
      border-radius: 1rem;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: #020617;
      font-weight: bold;
      cursor: pointer;
      font-size: 1rem;
      margin-top: 0.5rem;
      transition: transform 0.15s ease, opacity 0.15s ease;
    }

    button.action:hover { transform: translateY(-1px); opacity: 0.95; }

    .hidden { display: none; }

    /* Advertisement + About */
    .ad-banner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 230px;
      z-index: 3000;
      display: flex;
      gap: 16px;
      padding: 8px 16px;
      box-sizing: border-box;
    }

    .ad-large {
      flex: 1;
      height: 100%;
      border: 1px solid var(--accent);
      border-radius: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.85rem;
      font-weight: bold;
      letter-spacing: 0.04em;
      color: #e2e8f0;
      box-shadow: 0 12px 30px rgba(0,0,0,0.6);
      text-transform: uppercase;
      overflow: hidden;
      text-decoration: none;
      background: #020617;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .ad-large:hover {
      transform: scale(1.02);
      box-shadow: 0 18px 45px rgba(0,0,0,0.8);
    }

    .ad-large img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 1.5rem;
      transition: opacity 0.8s ease-in-out, transform 0.8s ease-in-out;
      will-change: opacity, transform;
    }

    .about-btn {
      height: 100%;
      padding: 0 1.75rem;
      min-height: 48px;
      border-radius: 1.5rem;
      border: 1px solid var(--accent);
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: #020617;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 12px 30px rgba(0,0,0,0.6);
      transition: transform 0.15s ease, box-shadow 0.15s ease, opacity 0.15s ease;
    }

    .about-btn:hover {
      transform: translateY(-1px) scale(1.05);
      box-shadow: 0 18px 45px rgba(0,0,0,0.75);
      opacity: 0.95;
    }

    /* Top toolbar */
    .toolbar {
      position: sticky;
      top: 230px;
      left: 0;
      width: 100vw;
      display: flex;
      row-gap: 18px;
      column-gap: 18px;
      z-index: 2000;
      flex-wrap: wrap;
      justify-content: flex-start;
      padding: 12px 16px;
      box-sizing: border-box;
      background: linear-gradient(180deg, rgba(2,6,23,0.85), rgba(2,6,23,0.6));
      backdrop-filter: blur(6px);
    }

    .tool-btn {
      padding: 0.45rem 0.9rem;
      min-height: 36px;
      line-height: 1.2;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-weight: bold;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: #020617;
      box-shadow: 0 8px 20px rgba(0,0,0,0.5);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
      flex: 1 1 auto;
      min-width: 140px;
      text-align: center;
    }

    .tool-btn:hover { transform: translateY(-2px) scale(1.05); }

    .tool-btn.active {
      box-shadow: 0 0 0 2px var(--accent), 0 0 30px rgba(56,189,248,0.9);
      transform: scale(1.08);
      background: linear-gradient(135deg, var(--accent2), var(--accent));
    }

    .theme-btn {
      background: linear-gradient(135deg, #14b8a6, #2dd4bf);
    }

    @media (max-width: 600px) {
      /* Stack ad and controls vertically on phones */
      .ad-banner {
        flex-direction: column;
        height: auto;
        padding: 12px;
        gap: 12px;
      }

      .ad-large {
        height: 140px;
      }

      .ad-banner > div {
        flex-direction: row;
        justify-content: space-between;
      }

      .about-btn {
        flex: 1;
        min-height: 44px;
      }

      /* Toolbar becomes horizontal scroll strip */
      .toolbar {
        position: sticky;
        top: auto;
        flex-wrap: nowrap;
        overflow-x: auto;
        column-gap: 10px;
        padding: 10px 12px;
      }

      .tool-btn {
        flex: 0 0 auto;
        min-width: 140px;
      }

      /* Card spacing for small screens */
      .card {
        margin: 16px auto 24px;
        max-width: 94vw;
        padding: 1.5rem;
      }
    }

      .tool-btn {
        flex: 0 0 auto;
        min-width: 140px;
      }
    }

    footer { font-size: 0.75rem; margin-top: 0.75rem; opacity: 0.7; }

    .toolbar::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -8px;
      width: 100%;
      height: 1px;
      background: linear-gradient(to right, transparent, var(--accent), transparent);
      opacity: 0.4;
    }

    @keyframes floatIn {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    /* About modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(2, 6, 23, 0.75);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 4000;
      backdrop-filter: blur(4px);
    }

    .modal-overlay.active { display: flex; }

    .about-modal {
      width: 280px;
      max-height: 70vh;
      background: var(--card);
      border-radius: 1.25rem;
      box-shadow: 0 25px 60px rgba(0,0,0,0.8);
      padding: 1.25rem;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      transform: translateX(40px) scale(0.95);
      opacity: 0;
      transition: transform 0.3s ease, opacity 0.3s ease;
      border: 1px solid var(--accent);
    }

    .modal-overlay.active .about-modal {
      transform: translateX(0) scale(1);
      opacity: 1;
    }

    .about-modal h2 {
      margin: 0;
      font-size: 1.1rem;
      text-align: center;
      color: var(--accent);
    }

    .about-modal .content {
      font-size: 0.85rem;
      line-height: 1.5;
      color: var(--text);
      overflow-y: auto;
    }

    .modal-btn {
      margin-top: auto;
      padding: 0.5rem;
      border-radius: 0.75rem;
      border: none;
      font-weight: bold;
      cursor: pointer;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: #020617;
    }
  </style>

  <!-- PDF / IMAGE LIBRARIES (Required for GitHub Pages) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
</head>
<body>

  <div class="ad-banner">
    <a class="ad-large" id="adLink" href="https://amzn.to/4bBnZkr" target="_blank" rel="noopener noreferrer">
      <img id="adImage" src="https://m.media-amazon.com/images/G/31/Events/img25/JanART26_8_PM_PC.jpg" alt="Advertisement" />
    </a>
    <div style="display:flex; flex-direction:column; gap:12px; height:100%; justify-content:space-between;">
      <button class="about-btn" id="aboutBtn">About</button>
      <button class="about-btn theme-btn" id="themeToggleTop">Theme</button>
    </div>
  </div>

  <div class="toolbar">
    <button class="tool-btn" data-page="imagePage">Image to PDF Converter</button>
    <button class="tool-btn" data-page="mergePage">PDF Merge</button>
    <button class="tool-btn" data-page="splitPage">PDF Splitter</button>
    <button class="tool-btn" data-page="formatPage">Image Format Converter</button>
    <button class="tool-btn" data-page="watermarkPage">Watermark Tool</button>
    <button class="tool-btn" data-page="pdfToImagePage">PDF to Image Converter</button>
    <button class="tool-btn" data-page="pageSizePage">Page Size Converter</button>
    <button class="tool-btn" data-page="cropPage">Image Cropper</button>
  </div>

  <div id="headerSpacer"></div>

  <div class="card" style="margin: 24px auto 0;">

    <div id="imagePage">
      <h1>Image to PDF Converter</h1>
      <input type="file" id="imageInput" accept="image/*" multiple />
      <button id="convertBtn" class="action">Download PDF</button>
      <footer>Convert images into a multi-page PDF</footer>
    </div>

    <div id="mergePage" class="hidden">
      <h1>PDF Merge</h1>
      <input type="file" id="mergeInput" accept="application/pdf" multiple />
      <button class="action" id="mergeBtn">Merge & Download</button>
      <footer>Combine multiple PDFs into one file</footer>
    </div>

    <div id="splitPage" class="hidden">
      <h1>PDF Splitter</h1>
      <input type="file" id="splitInput" accept="application/pdf" />
      <input type="text" id="splitRange" placeholder="Page range (e.g. 1-3,5)" />
      <button class="action">Split & Download</button>
      <footer>Extract pages from a PDF</footer>
    </div>

    <div id="formatPage" class="hidden">
      <h1>Image Format Converter</h1>
      <input type="file" id="formatInput" accept="image/*" />
      <div style="display:flex; gap:8px; align-items:center;">
        <button class="action" style="flex:1;">Convert Format</button>
        <button class="tool-btn" id="formatToWatermark">Watermark →</button>
      </div>
      <footer>Convert JPG, PNG, WEBP</footer>
    </div>

    <div id="watermarkPage" class="hidden">
      <h1>Watermark Tool</h1>
      <input type="file" id="watermarkInput" accept="image/*" />
      <input type="text" id="watermarkText" placeholder="Watermark text" />
      <button class="action">Apply Watermark</button>
      <footer>Add branding to images</footer>
    </div>

    <div id="pdfToImagePage" class="hidden">
      <h1>PDF to Image Converter</h1>
      <input type="file" accept="application/pdf" />
      <button class="action">Extract Images</button>
      <footer>Export PDF pages as images</footer>
    </div>

    <div id="pageSizePage" class="hidden">
      <h1>Page Size Converter</h1>
      <input type="file" accept="application/pdf" />
      <button class="action">Convert to A4 / Letter</button>
      <footer>Change PDF page dimensions</footer>
    </div>

    <div id="cropPage" class="hidden">
      <h1>Image Cropper</h1>
      <input type="file" accept="image/*" />
      <button class="action">Crop & Download</button>
      <footer>Crop and rotate images</footer>
    </div>

  </div>

  <div id="aboutOverlay" class="modal-overlay">
    <div class="about-modal">
      <h2>About This Tool</h2>
      <div class="content">
        <p><strong>All-in-One Document Workbench</strong> is a privacy-first, browser-based toolkit for working with images and PDFs.</p>
        <p><strong>Features:</strong></p>
        <p>• Image → PDF converter<br>
           • PDF merge and split tools<br>
           • Image format conversion<br>
           • Watermarking<br>
           • PDF → Image export<br>
           • Page size conversion<br>
           • Image cropper</p>
        <p><strong>Created by:</strong> Aniket Singh</p>
        <p>Your files never leave your device. Everything runs locally in your browser.</p>
      </div>
      <button class="modal-btn" id="closeAbout">Close</button>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {

      // AD ROTATION SETUP
      const ads = [
        { img: "https://m.media-amazon.com/images/G/31/Events/img25/JanART26_8_PM_PC.jpg", link: "https://amzn.to/4bBnZkr" },
        { img: "https://images-eu.ssl-images-amazon.com/images/G/31/glp/bigbets/Laptops-Category-Hero_Asin-PC_Day-1-onwards._CB773336744_.jpg", link: "https://amzn.to/4sRf052" },
        { img: "https://images-eu.ssl-images-amazon.com/images/G/31/WLA/18/GW/D374469778_IN_WLA_Janart26-GW_PC_3000x1200._CB773454086_.jpg", link: "https://amzn.to/49Zcu53" },
        { img: "https://images-eu.ssl-images-amazon.com/images/G/31/img26/Beauty/GW/846._CB773416258_.jpg", link: "https://amzn.to/49CZFw4" },
        { img: "https://images-eu.ssl-images-amazon.com/images/G/31/img22/headphonesD1/GW/Bestselling-headphones_Audio_GW_3000x1200_Day-1._CB773357231_.jpg", link: "https://amzn.to/3LNpi5r" }
      ];

      const adImage = document.getElementById("adImage");
      const adLink = document.getElementById("adLink");
      let adIndex = 0;

      function rotateAd() {
        adIndex = (adIndex + 1) % ads.length;

        adImage.style.opacity = 0;
        adImage.style.transform = "scale(1.05)";

        setTimeout(() => {
          adImage.src = ads[adIndex].img;
          adLink.href = ads[adIndex].link;

          requestAnimationFrame(() => {
            adImage.style.opacity = 1;
            adImage.style.transform = "scale(1)";
          });
        }, 500);
      }

      setInterval(rotateAd, 6000);

      const adBanner = document.querySelector(".ad-banner");
      const toolbar = document.querySelector(".toolbar");
      const headerSpacer = document.getElementById("headerSpacer");

            function updateHeaderSpacer() {
        const adHeight = adBanner.offsetHeight;
        const toolbarHeight = toolbar.offsetHeight;
        const safeGap = window.innerWidth <= 600 ? 12 : 16;
        headerSpacer.style.height = (adHeight + toolbarHeight + safeGap) + "px";
      }

      window.addEventListener("resize", updateHeaderSpacer);
      updateHeaderSpacer();

      const pages = document.querySelectorAll(".card > div");
      const buttons = document.querySelectorAll(".tool-btn[data-page]");

      function showPage(id) {
        pages.forEach(p => p.classList.add("hidden"));
        const target = document.getElementById(id);
        if (target) target.classList.remove("hidden");

        buttons.forEach(b => b.classList.remove("active"));
        const activeBtn = document.querySelector(`.tool-btn[data-page="${id}"]`);
        if (activeBtn) activeBtn.classList.add("active");
      }

      buttons.forEach(btn => {
        btn.addEventListener("click", () => {
          showPage(btn.dataset.page);
        });
      });

      showPage("imagePage");

      const themeToggle = document.getElementById("themeToggleTop");
      themeToggle.addEventListener("click", () => {
        document.body.classList.toggle("light");
      });

      const aboutBtn = document.getElementById("aboutBtn");
      const aboutOverlay = document.getElementById("aboutOverlay");
      const closeAbout = document.getElementById("closeAbout");

      aboutBtn.addEventListener("click", () => {
        aboutOverlay.classList.add("active");
      });

      closeAbout.addEventListener("click", () => {
        aboutOverlay.classList.remove("active");
      });

      aboutOverlay.addEventListener("click", (e) => {
        if (e.target === aboutOverlay) {
          aboutOverlay.classList.remove("active");
        }
      });

      const formatToWatermark = document.getElementById("formatToWatermark");
      if (formatToWatermark) {
        formatToWatermark.addEventListener("click", () => {
          showPage("watermarkPage");
        });
      }

      // IMAGE → PDF IMPLEMENTATION
      const { jsPDF } = window.jspdf;

      const convertBtn = document.getElementById("convertBtn");
      const imageInput = document.getElementById("imageInput");

      convertBtn.addEventListener("click", async () => {
        const files = imageInput.files;
        if (!files || files.length === 0) {
          alert("Please select at least one image");
          return;
        }

        const pdf = new jsPDF();

        for (let i = 0; i < files.length; i++) {
          const imgData = await readFileAsDataURL(files[i]);
          const img = await loadImage(imgData);

          const pageWidth = pdf.internal.pageSize.getWidth();
          const pageHeight = (img.height * pageWidth) / img.width;

          if (i !== 0) pdf.addPage();
          pdf.addImage(img, "JPEG", 0, 0, pageWidth, pageHeight);
        }

        pdf.save("images.pdf");
      });

      function readFileAsDataURL(file) {
        return new Promise((resolve, reject) => {
          const reader = new FileReader();
          reader.onload = () => resolve(reader.result);
          reader.onerror = reject;
          reader.readAsDataURL(file);
        });
      }

      function loadImage(src) {
        return new Promise((resolve, reject) => {
          const img = new Image();
          img.onload = () => resolve(img);
          img.onerror = reject;
          img.src = src;
        });
      }

      // TEST CASES
      // 1. Toolbar switches between all pages
      // 2. Theme button toggles light/dark mode
      // 3. Image → PDF downloads a valid PDF
      // 4. Merge page accepts multiple PDFs
      // 5. Split page accepts range input

    });
  </script>

</body>
</html>
